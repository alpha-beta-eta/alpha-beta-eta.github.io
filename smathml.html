<html><head><meta charset="utf-8"/><title>SMathML参考</title><link href="styles.css" rel="stylesheet"/></head><body><h1>SMathML参考</h1><h2>一. 原理</h2><p>SMathML的基本原理请参见<a href="notes/SMathML.pdf">SMathML论文 (draft)</a>.</p><h2>二. 元素参考</h2><h3>2.1 基本元素</h3><p>根据MathML Core标准, 目前SMathML提供如下基本元素以供构造MathML表达式.<pre><code>Math Merror Mfrac Mi Mmultiscripts Mn Mo Mover Mpadded Mphantom Mroot Mrow
Ms Mspace Msqrt Mstyle Msub Msubsup Msup Mtable Mtd Mtext Mtr Munder Munderover</code></pre></p><h4><code>Math</code>参考</h4><p>根据MathML标准, MathML表达式必须被包裹于<code>&lt;math></code>元素之中. 尽管如此, SMathML提供了一种手段, 可以免除读者疲于添加<code>Math</code>的辛劳. 在<code>slt.rkt</code>之中, 我们提供了构造树变换的基本抽象<code>T</code>. 据此, 我们在<code>math-styles.rkt</code>之中提供了一个过程<code>Tm</code>, 其可以自动为数学内容添加<code>&lt;math></code>标签. 我们也为过程<code>Math</code>提供了一个简短的别名<code>M</code>.</p><p>MathML内容有两种呈现风格, 一种是<code>inline</code>, 另一种是<code>block</code>, 让我们在以下两个例子之中对于它们进行比较.</p><div class="example"><b>例子1.</b> <b><code>inline</code>风格.</b> 欧拉公式<math display="inline"><mrow><msup><mi>e</mi><mrow><mi>i</mi><mo>&it;</mo><mi>&pi;</mi></mrow></msup><mo>+</mo><mn>1</mn><mo>=</mo><mn>0</mn></mrow></math>看上去是很有趣的.</div><div class="example"><b>例子2.</b> <b><code>block</code>风格.</b> 欧拉公式<math display="block"><mrow><msup><mi>e</mi><mrow><mi>i</mi><mo>&it;</mo><mi>&pi;</mi></mrow></msup><mo>+</mo><mn>1</mn><mo>=</mo><mn>0</mn></mrow></math>看上去是很有趣的.</div><p>以上两个例子的MathML部分如下.<pre><code>(Math #:attr* '((display &quot;inline&quot;))
      (Mrow (Msup (Mi &quot;e&quot;) (Mrow (Mi &quot;i&quot;) (Mo &quot;&amp;it;&quot;) (Mi &quot;&amp;pi;&quot;))) (Mo &quot;+&quot;) (Mn &quot;1&quot;) (Mo &quot;=&quot;) (Mn &quot;0&quot;)))</code></pre><pre><code>(Math #:attr* '((display &quot;block&quot;))
      (Mrow (Msup (Mi &quot;e&quot;) (Mrow (Mi &quot;i&quot;) (Mo &quot;&amp;it;&quot;) (Mi &quot;&amp;pi;&quot;))) (Mo &quot;+&quot;) (Mn &quot;1&quot;) (Mo &quot;=&quot;) (Mn &quot;0&quot;)))</code></pre>在不明确指出呈现风格的情况下, MathML默认的呈现风格是<code>inline</code>.</p><h4><code>Mfrac</code>参考</h4><p><code>Mfrac</code>构造一个分式, 例如<pre><code>(Mfrac (Mn &quot;1&quot;) (Mrow (Mi &quot;x&quot;) (Mo &quot;+&quot;) (Mn &quot;1&quot;)))</code></pre><pre><code>&lt;mfrac>&lt;mn>1&lt;/mn>&lt;mrow>&lt;mi>x&lt;/mi>&lt;mo>+&lt;/mo>&lt;mn>1&lt;/mn>&lt;/mrow>&lt;/mfrac></code></pre><math display="block"><mfrac><mn>1</mn><mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow></mfrac></math></p><h3>2.2 衍生元素与复合元素</h3><p>显然, 这部分是为了让编写数学内容的生活更加简单.</p><h4><code>$a</code>, <code>$b</code>, <code>$c</code>, ...参考</h4><p><code>$a</code>不过就是<code>(Mi &quot;a&quot;)</code>的缩写, 依此类推.</p><h4><code>$alpha</code>, <code>$beta</code>, <code>$gamma</code>, ...参考</h4><p><code>$alpha</code>不过就是<code>(Mi &quot;&amp;alpha;&quot;)</code>的缩写, 依此类推.</p><h4><code>$a:normal</code>, <code>$a:bold</code>, <code>$a:script</code>, ...参考</h4><p><code>$a:normal</code>不过就是<code>(Mi &quot;a&quot; #:attr* '((mathvariant &quot;normal&quot;)))</code>的缩写, 依此类推.</p><h2>三. 变换</h2><p>SMathML提供了一些构造变换的手段和两个实用的变换.</p><h3><code>set-attr*</code>参考</h3><h3><code>Ttable</code>参考</h3><p><code>Ttable</code>为用户调整表格提供了方便的抽象. </p><h3><code>T</code>参考</h3><p><code>T</code>是对于一般树变换的抽象. </p><h3><code>Tm</code>参考</h3><p><code>Tm</code>为用户编写数学内容提供了许多方便.</p><h3><code>Tn</code>参考</h3><p><code>Tn</code>为用户提供了一种进行自动编号与引用的手段. </p><h2>四. 注记</h2><p>此注记内容和MathML标准的细节与具体的浏览器实现有关, 因而有可能存在过时的情况.</p><ol><li>根据MathML标准, 撇 (prime) 的正当做法是使用上标, 例如<pre><code>(Msup $x $prime)</code></pre><pre><code>&lt;msup>&lt;mi>x&lt;/mi>&lt;mo>&amp;prime;&lt;/mo>&lt;/msup></code></pre><math display="block"><msup><mi>x</mi><mo>&prime;</mo></msup></math>而不是<pre><code>(Mrow $x $prime)</code></pre><pre><code>&lt;mrow>&lt;mi>x&lt;/mi>&lt;mo>&amp;prime;&lt;/mo>&lt;/mrow></code></pre><math display="block"><mrow><mi>x</mi><mo>&prime;</mo></mrow></math>尽管如此, 目前Firefox对此支持较好, 而Chrome按照正当做法则会造成偏上的情况. 更大的问题在于给具有下标的元素添加一撇, 例如<pre><code>(_^ $x $1 $prime)</code></pre><pre><code>&lt;msubsup>&lt;mi>x&lt;/mi>&lt;mn>1&lt;/mn>&lt;mo>&amp;prime;&lt;/mo>&lt;/msubsup></code></pre><math display="block"><msubsup><mi>x</mi><mn>1</mn><mo>&prime;</mo></msubsup></math>此时Firefox一切正常, 但是Chrome不论怎样变通都无法得到想要达成的输出结果.</li><li>虽然不知出于何种原因, 但是目前根式的渲染似乎是不正常的, 例如<pre><code>(Mroot $n $x)</code></pre><pre><code>&lt;mroot>&lt;mi>n&lt;/mi>&lt;mi>x&lt;/mi>&lt;/mroot></code></pre><math display="block"><mroot><mi>n</mi><mi>x</mi></mroot></math></li><li>对于Chrome而言, 除非括号内包裹的是较大的数学表达式, 那么就必须为括号添加<code>stretchy=&quot;false&quot;</code>属性以使其看起来符合常理, 例如<pre><code>(&amp;cm (pare $x) (par0 $x))</code></pre><pre><code>&lt;mrow>&lt;mrow>&lt;mo>(&lt;/mo>&lt;mi>x&lt;/mi>&lt;mo>)&lt;/mo>&lt;/mrow>&lt;mo>,&lt;/mo>
&lt;mrow>&lt;mo stretchy=&quot;false&quot;>(&lt;/mo>&lt;mi>x&lt;/mi>&lt;mo stretchy=&quot;false&quot;>)&lt;/mo>&lt;/mrow>&lt;/mrow></code></pre><math display="block"><mrow><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow><mo>,</mo><mrow><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mrow></math></li><li>目前Chrome对于标签<code>&lt;mover></code>的渲染不是很符合预期, 例如<pre><code>(OverBar (&+ $x $y))</code></pre><pre><code>&lt;mover>&lt;mrow>&lt;mi>x&lt;/mi>&lt;mo>+&lt;/mo>&lt;mi>y&lt;/mi>&lt;/mrow>&lt;mo>&amp;OverBar;&lt;/mo>&lt;/mover></code></pre><math display="block"><mover><mrow><mi>x</mi><mo>+</mo><mi>y</mi></mrow><mo>&OverBar;</mo></mover></math></li><li>目前Chrome对于数学表格的属性支持极其有限, 因此即便连对齐也无法控制.</li></ol><h2>五. 例子, 或者说画廊</h2><h3>二项式公式</h3><math display="block"><mrow><msup><mrow><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>+</mo><mi>y</mi></mrow><mo stretchy="false">)</mo></mrow><mi>n</mi></msup><mo>=</mo><mrow><munderover><mo>&sum;</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mrow><mrow><mo>(</mo><mfrac linethickness="0"><mi>n</mi><mi>k</mi></mfrac><mo>)</mo></mrow><mo>&it;</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>&minus;</mo><mi>k</mi></mrow></msup><mo>&it;</mo><msup><mi>y</mi><mi>k</mi></msup></mrow></mrow></mrow></math><h3>一个经典的极限</h3><math display="block"><mrow><mrow><munder><mo>lim</mo><mrow><mi>x</mi><mo lspace="0" rspace="0">&rarr;</mo><mn>0</mn></mrow></munder><mfrac><mrow><mi>sin</mi><mo>&af;</mo><mi>x</mi></mrow><mi>x</mi></mfrac></mrow><mo>=</mo><mn>1</mn></mrow></math><h3><math><mi>e</mi></math>的定义</h3><math display="block"><mrow><mi>e</mi><mo>&colone;</mo><mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo lspace="0" rspace="0">&rarr;</mo><mi>&infin;</mi></mrow></munder><msup><mrow><mo>(</mo><mrow><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mi>n</mi></mfrac></mrow><mo>)</mo></mrow><mi>n</mi></msup></mrow></mrow><mtext>或者</mtext><mrow><mi>e</mi><mo>&colone;</mo><mrow><munderover><mo>&sum;</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>&infin;</mi></munderover><mfrac><mn>1</mn><mrow><mi>n</mi><mo>!</mo></mrow></mfrac></mrow></mrow></math><h3>希腊字母</h3><math display="block"><mtable><mtr><mtd><mi>&alpha;</mi></mtd><mtd><mi>&beta;</mi></mtd><mtd><mi>&gamma;</mi></mtd><mtd><mi>&delta;</mi></mtd><mtd><mi>&epsilon;</mi></mtd><mtd><mi>&zeta;</mi></mtd><mtd><mi>&eta;</mi></mtd><mtd><mi>&theta;</mi></mtd><mtd><mi>&iota;</mi></mtd><mtd><mi>&kappa;</mi></mtd><mtd><mi>&lambda;</mi></mtd><mtd><mi>&mu;</mi></mtd><mtd><mi>&nu;</mi></mtd><mtd><mi>&xi;</mi></mtd><mtd><mi>&omicron;</mi></mtd><mtd><mi>&pi;</mi></mtd><mtd><mi>&rho;</mi></mtd><mtd><mi>&sigma;</mi></mtd><mtd><mi>&tau;</mi></mtd><mtd><mi>&upsilon;</mi></mtd><mtd><mi>&phi;</mi></mtd><mtd><mi>&chi;</mi></mtd><mtd><mi>&psi;</mi></mtd><mtd><mi>&omega;</mi></mtd></mtr><mtr><mtd><mi>&Alpha;</mi></mtd><mtd><mi>&Beta;</mi></mtd><mtd><mi>&Gamma;</mi></mtd><mtd><mi>&Delta;</mi></mtd><mtd><mi>&Epsilon;</mi></mtd><mtd><mi>&Zeta;</mi></mtd><mtd><mi>&Eta;</mi></mtd><mtd><mi>&Theta;</mi></mtd><mtd><mi>&Iota;</mi></mtd><mtd><mi>&Kappa;</mi></mtd><mtd><mi>&Lambda;</mi></mtd><mtd><mi>&Mu;</mi></mtd><mtd><mi>&Nu;</mi></mtd><mtd><mi>&Xi;</mi></mtd><mtd><mi>&Omicron;</mi></mtd><mtd><mi>&Pi;</mi></mtd><mtd><mi>&Rho;</mi></mtd><mtd><mi>&Sigma;</mi></mtd><mtd><mi>&Tau;</mi></mtd><mtd><mi>&Upsilon;</mi></mtd><mtd><mi>&Phi;</mi></mtd><mtd><mi>&Chi;</mi></mtd><mtd><mi>&Psi;</mi></mtd><mtd><mi>&Omega;</mi></mtd></mtr></mtable></math><h3>不同的字体</h3><math display="block"><mtable><mtr><mtd><mtext>normal</mtext></mtd><mtd><mtext>bold</mtext></mtd><mtd><mtext>italic</mtext></mtd><mtd><mtext>bold-italic</mtext></mtd><mtd><mtext>double-struck</mtext></mtd><mtd><mtext>bold-fraktur</mtext></mtd><mtd><mtext>script</mtext></mtd><mtd><mtext>bold-script</mtext></mtd></mtr><mtr><mtd><mi mathvariant="normal">C</mi></mtd><mtd><mi mathvariant="bold">C</mi></mtd><mtd><mi mathvariant="italic">C</mi></mtd><mtd><mi mathvariant="bold-italic">C</mi></mtd><mtd><mi mathvariant="double-struck">C</mi></mtd><mtd><mi mathvariant="bold-fraktur">C</mi></mtd><mtd><mi mathvariant="script">C</mi></mtd><mtd><mi mathvariant="bold-script">C</mi></mtd></mtr></mtable></math><math display="block"><mtable><mtr><mtd><mtext>fraktur</mtext></mtd><mtd><mtext>sans-serif</mtext></mtd><mtd><mtext>bold-sans-serif</mtext></mtd><mtd><mtext>sans-serif-italic</mtext></mtd><mtd><mtext>sans-serif-bold-italic</mtext></mtd><mtd><mtext>monospace</mtext></mtd></mtr><mtr><mtd><mi mathvariant="fraktur">C</mi></mtd><mtd><mi mathvariant="sans-serif">C</mi></mtd><mtd><mi mathvariant="bold-sans-serif">C</mi></mtd><mtd><mi mathvariant="sans-serif-italic">C</mi></mtd><mtd><mi mathvariant="sans-serif-bold-italic">C</mi></mtd><mtd><mi mathvariant="monospace">C</mi></mtd></mtr></mtable></math><h3>Fibonacci序列</h3><math display="block"><mtable frame="solid" rowlines="solid" columnlines="solid"><mtr><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>6</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>7</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>8</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>9</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>10</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>11</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>12</mn><mo stretchy="false">)</mo></mrow></mrow></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>2</mn></mtd><mtd><mn>3</mn></mtd><mtd><mn>5</mn></mtd><mtd><mn>8</mn></mtd><mtd><mn>13</mn></mtd><mtd><mn>21</mn></mtd><mtd><mn>34</mn></mtd><mtd><mn>55</mn></mtd><mtd><mn>89</mn></mtd><mtd><mn>144</mn></mtd></mtr></mtable></math></body></html>