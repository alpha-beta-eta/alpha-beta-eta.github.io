#lang racket
(provide tg.html)
(require SMathML)
(define $sin (Mi "sin"))
(define $cos (Mi "cos"))
(define (&sin x) (app $sin x))
(define (&cos x) (app $cos x))
(define (@sin x) (@ap $sin x))
(define (@cos x) (@ap $cos x))
(define $rotate (Mi "rotate"))
(define $perp (Mi "perp"))
(define (&rotate v a)
  (appl $rotate v a))
(define (&perp v) (app $perp v))
(define (map2 proc lst)
  (if (null? lst)
      '()
      (cons (proc (car lst) (cadr lst))
            (map2 proc (cddr lst)))))
(define (LC . kv*)
  (apply &+ (map2 &i* kv*)))
(define tg.html
  (TnTmPrelude
   #:title "乌龟几何"
   #:css "styles.css"
   (H1. "乌龟几何")
   (P "Turtle Geometry是一本使用乌龟画图教授几何学的书籍, "
      "并且反映了古典人工智能的精神. 实际上, "
      "它属于MIT AI书系. 这个页面上的是我的一些笔记, "
      "记号和原书可能会有所不同.")
   (H2. "乌龟几何引论")
   (H3. "乌龟图形")
   (H4. "过程")
   (H4. "使用乌龟绘图")
   (H4. "乌龟几何与坐标几何的对比")
   (H4. "一些简单的乌龟程序")
   (H3. "POLY和其他封闭路径")
   (H4. "封闭路径定理和简单封闭路径定理")
   (H4. "POLY封闭定理")
   (H3. "循环程序")
   (H4. "循环引理")
   (H4. "循环程序的例子")
   (H4. "再次讨论循环引理")
   (H4. "技术性总结")
   (H4. "非技术性总结")
   (H3. "循环程序的对称性")
   (H4. "POLY的对称性")
   (H4. "公因子")
   (H2. "反馈, 成长和形式")
   (H3. "作为动物的乌龟")
   (H3. "乌龟的交互")
   (H3. "成长")
   (H3. "递归设计")
   (H2. "乌龟几何中的向量方法")
   (H3. "对于乌龟程序进行向量分析")
   (H4. "向量运算: 数乘和加法")
   (P "本节描述了向量的基本运算, 以及一些基本性质 (或者说向量空间的公理).")
   (H4. "封闭路径的向量表示")
   (P "乌龟的每一步都是一个位移, 因而可以用向量表示. "
      "相继的位移可以由向量的加法描述. 设一个乌龟走了"
      $n "步, 而其位移分别为" (&cm $u_0 $..h (_ $u (&- $n $1)))
      ", 那么合位移为"
      (MB (&+ $u_0 $..c (_ $u (&- $n $1))) ".")
      "所谓乌龟的移动形成了封闭的路径, 实际上指的是"
      (MB (&= (&+ $u_0 $..c (_ $u (&- $n $1))) $0) "."))
   (H4. "再看POLY: 旋转和线性性质")
   (P (B "POLY封闭定理 (向量形式). ")
      "给定向量" $u "和正整数" $n ", 令" (&= $theta (&/ (&i* $2 $pi) $n))
      "而" (&= $u_k (&rotate $u (&i* $k $theta))) ", 那么"
      (MB (&= (&+ $u_0 $..c (_ $u (&- $n $1))) $0) "."))
   ((proof)
    (MB (deriv
         (&rotate (&+ $u_0 $..c (_ $u (&- $n $1))) $theta)
         (&+ (&rotate $u_0 $theta) $..c
             (&rotate (_ $u (&- $n $1)) $theta))
         (&+ $u_1 $..c (_ $u (&- $n $1)) $u_0)
         (&+ $u_0 $..c (_ $u (&- $n $1)))))
    "几何直觉告诉我们, 这样的向量只能为零.")
   (H4. "MULTIPOLY: 向量分析的又一次应用")
   (H4. "意外封闭的图形")
   (H3. "向量的坐标")
   (H4. "以坐标表达的向量运算")
   (H4. "以坐标表达旋转: 线性原理")
   (P "对于(非零)向量" $u "和角度" $theta
      ", 我们设由向量" $u "旋转"
      $theta "得到的向量为"
      (&rotate $u $theta)
      ", 而" (&perp $u)
      "是由" $u "旋转一个直角得到的向量, "
      "注意它们旋转的方向应该是一致的. 那么, "
      (&rotate $u $theta)
      "应该是" $u "和" (&perp $u)
      "的线性组合. 经过观察, 可以看出"
      (MB (&= (&rotate $u $theta)
              (LC (@cos $theta) $u
                  (@sin $theta) (&perp $u))) ".")
      "为了以坐标表达旋转, 设"
      (&= $u (LC $u_x $x $u_y $y))
      ", 其中" $x "和" $y "构成了平面通常的基底. "
      "那么, 我们有"
      (MB (deriv
           (&perp $u)
           (&perp (LC $u_x $x $u_y $y))
           (LC $u_x (&perp $x) $u_y (&perp $y))
           (LC $u_x $y $u_y (@- $x))
           (LC (@- $u_y) $x $u_x $y)))
      "换言之, 坐标为" (tu0 $u_x $u_y)
      "的向量旋转一个直角得到的向量的坐标为"
      (tu0 (&- $u_y) $u_x)
      ". 所谓线性原理, 指的是线性变换保持线性组合, 仅此而已.")
   (H3. "在计算机上实现向量乌龟图形")
   (H4. "乌龟状态")
   (H4. "状态改变的运算符")
   (H3. "调动三维空间中的乌龟")
   (H4. "旋转乌龟")
   (H4. "超出平面的旋转")
   (H4. "对于状态改变运算符的总结")
   (H3. "显示三维空间中的乌龟")
   (H4. "平行投影")
   (H4. "点积: 线性的又一次应用")
   (H4. "以表达表达的平行投影; 一般化")
   (H4. "透视投影")
   (H4. "一个三维乌龟项目的大纲")
   (H2. "乌龟路径的拓扑")
   (H3. "封闭路径的形变")
   (H4. "乌龟路径: 图形和程序")
   (H4. "关联起图形和程序")
   (H4. "封闭路径的拓扑分类")
   (H3. "局部和全局信息")
   (H4. "从迷宫逃离")
   (H3. "曲线和平面的形变")
   (H4. "形变定理的证明")
   (H3. "Pledge算法的正确性")
   (H2. "逃出平面的乌龟")
   (H3. "球面上的乌龟几何")
   (H3. "曲率")
   (H3. "总曲率和拓扑")
   (H2. "探索立方体")
   (H3. "一个计算机立方体")
   (H3. "关于立方体的观察和问题")
   (H3. "结果")
   (H3. "结论")
   (H2. "再看球面")
   (H3. "计算机模拟")
   (H3. "探索")
   (H3. "结果")
   (H2. "分段平坦的曲面")
   (H3. "分段平坦曲面的程序")
   (H3. "定向")
   (H3. "曲率和Euler示性数")
   (H2. "弯曲空间和广义相对论")
   (H3. "楔表示")
   (H3. "弯曲空间和时间的现象")
   (H3. "相对性的广义理论")
   (H4. "作为曲率的重力")
   (H4. "世界线的旋转")
   (H4. "理解Lorentz旋转")
   (H3. "广义相对性模拟器")
   ))