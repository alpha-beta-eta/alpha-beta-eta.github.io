<html><head><meta charset="utf-8"/><title>SMathML Reference</title><link href="styles.css" rel="stylesheet"/></head><body><h1>SMathML Reference</h1><h2>1&nbsp;&nbsp;&nbsp;&nbsp;Introduction</h2><p>MathML is a markup language based on XML for describing mathematics. Though MathML is human-readable-and-writable, it is human-readable-and-writable in the same sense that XML is human-readable-and-writable. So we have to provide users with methods of combination and abstraction to help them organize ideas about mathematical presentation and content.</p><p>SMathML is a DSL embedded in Scheme for expressing MathML (and also HTML), which is based on a hierarchical structure:<math display="block"><mrow><mrow><mo stretchy="false">[</mo><mtext>user-defined abstractions</mtext><mo stretchy="false">]</mo></mrow><mo>&rarr;</mo><mrow><mo stretchy="false">[</mo><mtext>primitive abstractions</mtext><mo stretchy="false">]</mo></mrow><mo>&rarr;</mo><mrow><mo stretchy="false">[</mo><mtext>SXML</mtext><mo stretchy="false">]</mo></mrow><mo>&rarr;</mo><mrow><mo stretchy="false">[</mo><mtext>HTML/XML</mtext><mo stretchy="false">]</mo></mrow></mrow><mtext>.</mtext></math>It also provides a general way inspired by Oleg Kiselyov's SXSLT to create transformations of SXML, which is just a representation of HTML/XML as S-expressions. The boundary between primitive abstractions and user-defined abstractions is intended to be vague and the users are encouraged to create fundamental abstractions to his own taste.</p><h2>2&nbsp;&nbsp;&nbsp;&nbsp;Basic Elements of SMathML</h2><h2>3&nbsp;&nbsp;&nbsp;&nbsp;Transformations of SMathML</h2><h2>4&nbsp;&nbsp;&nbsp;&nbsp;Examples</h2><h3>4.1&nbsp;&nbsp;&nbsp;The Fibonacci Sequence</h3><pre><code>(MB (let ((fib (lambda (n)
                 (let iter ((a 0) (b 1) (c 0))
                   (if (= c n)
                       a
                       (iter b (+ a b) (+ c 1))))))
          (&amp;fib (lambda (n) (app 'fib n)))
          (seq (range 13)))
      (set-attr*
       (&amp;table (list (map &amp;fib seq) (map fib seq)))
       'frame &quot;solid&quot; 'rowlines &quot;solid&quot; 'columnlines &quot;solid&quot;)))</code></pre><math display="block"><mtable frame="solid" rowlines="solid" columnlines="solid"><mtr><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>6</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>7</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>8</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>9</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>10</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>11</mn><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd><mrow><mi>fib</mi><mo>&af;</mo><mrow><mo stretchy="false">(</mo><mn>12</mn><mo stretchy="false">)</mo></mrow></mrow></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>2</mn></mtd><mtd><mn>3</mn></mtd><mtd><mn>5</mn></mtd><mtd><mn>8</mn></mtd><mtd><mn>13</mn></mtd><mtd><mn>21</mn></mtd><mtd><mn>34</mn></mtd><mtd><mn>55</mn></mtd><mtd><mn>89</mn></mtd><mtd><mn>144</mn></mtd></mtr></mtable></math><h3>4.2&nbsp;&nbsp;&nbsp;The Binomial Theorem</h3><pre><code>(MB (&amp;= (^ (@+ $x $y) $n)
        (sum (&amp;= $k $0) $n
             (&amp;i* (comb $n $k) (^ $x (&amp;- $n $k)) $y^k))))</code></pre><math display="block"><mrow><msup><mrow><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>+</mo><mi>y</mi></mrow><mo stretchy="false">)</mo></mrow><mi>n</mi></msup><mo>=</mo><mrow><munderover><mo>&sum;</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mrow><mrow><mo>(</mo><mfrac linethickness="0"><mi>n</mi><mi>k</mi></mfrac><mo>)</mo></mrow><mo>&it;</mo><msup><mi>x</mi><mrow><mi>n</mi><mo>&minus;</mo><mi>k</mi></mrow></msup><mo>&it;</mo><msup><mi>y</mi><mi>k</mi></msup></mrow></mrow></mrow></math><h2>5&nbsp;&nbsp;&nbsp;&nbsp;Remarks</h2></body></html>